<!-- frontend/dashboard.html -->
<div id="statisticsPage" class="stats-view">
  <header class="stats-header">
    <h1>Dashboard</h1>
    <p class="stats-subtitle">Infrastructure monitoring and analysis</p>
  </header>

  <div class="stats-tabs">
    <button id="tabAnalytics" class="tab-button active" type="button">Analytics</button>
    <button id="tabRepairs" class="tab-button" type="button">Repairs and Maintenance</button>
  </div>

  <!-- ANALYTICS -->
  <section id="analyticsTab" class="stats-tab">
    <div class="analytics-hero">
      <div>
        <div class="eyebrow">Dynamic Analytics</div>
        <div class="hero-title">Build the exact insights you need</div>
        <p class="stats-subtitle">Use any dataset field and scope it with the sidebar filters (Company -> Location -> Asset Type).</p>
      </div>
      <div class="hero-chips">
        <span class="chip">Real-time filters</span>
        <span class="chip">Unlimited widgets</span>
        <span class="chip">Bar / Pie / Ratio</span>
      </div>
    </div>

    <div id="analyticsBuilder" class="analytics-builder">
      <div class="builder-grid">
        <div class="field-group">
          <label for="anaField">Field</label>
          <div class="search-select">
            <input id="anaField" type="text" placeholder="Search any field" autocomplete="off" />
          </div>
        </div>
        <div class="field-group">
          <label for="anaVizType">Visualization</label>
          <select id="anaVizType">
            <option value="bar">Bar chart</option>
            <option value="pie">Pie chart</option>
            <option value="ratio">Ratio</option>
            <option value="aggregate">Aggregate counts</option>
          </select>
        </div>
        <div class="field-group">
          <label for="anaCompany">Company filter</label>
          <select id="anaCompany" data-placeholder="All companies"></select>
        </div>
        <div class="field-group">
          <label for="anaLocation">Location filter</label>
          <select id="anaLocation" data-placeholder="All locations"></select>
        </div>
        <div class="field-group">
          <label for="anaAsset">Asset type filter</label>
          <select id="anaAsset" data-placeholder="All asset types"></select>
        </div>
        <div class="field-group builder-action">
          <button id="btnAddAnalytic" class="btn btn-primary">Add analytic</button>
        </div>
      </div>

      <div id="ratioBuilder" class="builder-advanced" style="display:none;">
        <div class="builder-row">
          <div class="ratio-head">
            <div class="title">Numerator filters</div>
            <button id="btnAddNumerator" class="btn btn-ghost">+ Add filter</button>
          </div>
          <div id="ratioNumerators" class="numerator-list"></div>
        </div>
        <div class="builder-note">Denominator: # of stations matching the selected scope.</div>
      </div>

      <div id="aggregateBuilder" class="builder-advanced" style="display:none;">
        <label for="aggGrouping">Group by</label>
        <select id="aggGrouping"></select>
        <div class="builder-note">Options are derived from the sidebar filters (company -> location -> asset type).</div>
      </div>
    </div>

    <div id="analyticsGrid" class="stats-cards analytics-grid"><!-- dynamic cards --></div>
  </section>

  <!-- REPAIRS AND MAINTENANCE -->
  <section id="repairsTab" class="stats-tab" style="display:none;">
    <div class="repairs-toolbar">
      <button id="btnAddGlobalRepair" class="btn">+ Add Repair/Maintenance</button>
      <button id="btnImportRepairs" class="btn">Import from Excel</button>
      <button id="btnSelectAllRepairs" class="btn btn-secondary">Select All</button>
      <button id="btnDeselectAllRepairs" class="btn btn-ghost">Deselect All</button>
      <button id="btnResolveRepairs" class="btn btn-ghost">Resolve Selected</button>
      <span id="repairsSelectionCount" class="hint" style="margin-left: auto;">0 selected</span>
    </div>

    <!-- Dynamic tables per Type (only "Repair" exists at first; others appear as added/imported) -->
    <div id="globalTypeTables" class="repairs-tables"><!-- filled by JS --></div>

    <!-- Add Repair Modal (defined in separate file) -->
    <div id="globalRepairModal" class="modal" style="display:none;">
      <!-- Content will be added by JS -->
    </div>
    <!-- Import Repairs Modal -->
    <div id="importRepairsModal" class="modal" style="display:none;">
      <!-- Content will be added by JS -->
    </div>

    <!-- Missing Fields Modal -->
    <div id="missingFieldsModal" class="modal" style="display:none;">
      <!-- Content will be added by JS -->
    </div>

  </section>
</div>
